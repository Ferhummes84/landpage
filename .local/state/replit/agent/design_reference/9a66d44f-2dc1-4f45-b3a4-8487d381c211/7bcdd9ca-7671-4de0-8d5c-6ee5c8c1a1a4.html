<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleannet - Cadastro e Envio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
    tailwind.config = {
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                },
                fontFamily: {
                    sans: ["Inter", "sans-serif"],
                }
            },
        }
    };
    </script>
    <style>
        :root {
            --background: hsl(0 0% 100%);
            --foreground: hsl(222 84% 5%);
            --card: hsl(0 0% 100%);
            --card-foreground: hsl(222 84% 5%);
            --primary: hsl(210 90% 45%);
            --primary-foreground: hsl(210 40% 98%);
            --secondary: hsl(210 40% 96%);
            --secondary-foreground: hsl(222 47% 11%);
            --muted: hsl(210 40% 96%);
            --muted-foreground: hsl(215 16% 47%);
            --accent: hsl(210 40% 96%);
            --accent-foreground: hsl(222 47% 11%);
            --destructive: hsl(0 84% 60%);
            --destructive-foreground: hsl(210 40% 98%);
            --border: hsl(214 32% 91%);
            --input: hsl(214 32% 91%);
            --ring: hsl(215 20% 65%);
            --radius: 0.5rem;
        }
        
        .form-field {
            transition: all 0.2s ease-in-out;
        }
        
        .form-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px hsl(var(--ring));
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0;
        }
        
        .upload-area {
            border: 2px dashed hsl(var(--border));
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: var(--primary);
            background-color: hsl(var(--muted));
        }
        
        .upload-area.dragover {
            border-color: var(--primary);
            background-color: hsl(var(--primary) / 0.05);
        }
    </style>
</head>
<body class="bg-background text-foreground min-h-screen">
    <!-- @COMPONENT: Header [logo and navigation] -->
    <header class="w-full px-6 py-4">
        <div class="flex items-center">
            <!-- Cleannet Logo -->
            <div class="text-2xl font-bold tracking-tight">
                <span class="text-foreground">CLEA</span><span class="text-destructive">NET</span>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: Header -->

    <!-- @COMPONENT: PageContainer [main content wrapper] -->
    <main class="container mx-auto px-6 py-8 max-w-2xl">
        
        <!-- @COMPONENT: RegistrationPage [page 1 - registration form] -->
        <div id="registrationPage" class="space-y-8">
            <!-- @COMPONENT: PageTitle [title and description] -->
            <div class="text-center space-y-4">
                <h1 class="text-3xl font-bold text-foreground">Cadastro Contratação</h1>
                <p class="text-lg text-muted-foreground max-w-lg mx-auto">
                    Informações para contratação
                </p>
            </div>
            <!-- @END_COMPONENT: PageTitle -->

            <!-- @COMPONENT: RegistrationForm [main form with all fields] -->
            <div class="bg-card rounded-lg shadow-sm border border-border p-8 space-y-6">
                <form id="registrationForm" data-implementation="Form validation and submission logic">
                    <!-- CPF Field -->
                    <div class="space-y-2">
                        <label for="cpf" class="block text-sm font-medium text-foreground">
                            CPF
                        </label>
                        <input 
                            type="text" 
                            id="cpf"
                            name="cpf"
                            placeholder="123.123.123-12"
                            class="form-field w-full px-4 py-3 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground"
                            data-bind="formData.cpf"
                            data-mock="true"
                            required
                        />
                    </div>

                    <!-- Nome Completo Field -->
                    <div class="space-y-2">
                        <label for="nomeCompleto" class="block text-sm font-medium text-foreground">
                            Nome Completo
                        </label>
                        <input 
                            type="text" 
                            id="nomeCompleto"
                            name="nomeCompleto"
                            placeholder="Digite seu Nome Completo"
                            class="form-field w-full px-4 py-3 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground"
                            data-bind="formData.nomeCompleto"
                            data-mock="true"
                            required
                        />
                    </div>

                    <!-- Endereço Field -->
                    <div class="space-y-2">
                        <label for="endereco" class="block text-sm font-medium text-foreground">
                            Endereço
                        </label>
                        <input 
                            type="text" 
                            id="endereco"
                            name="endereco"
                            placeholder="Rua Exemplo 123, Bairro, Cidade"
                            class="form-field w-full px-4 py-3 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground"
                            data-bind="formData.endereco"
                            data-mock="true"
                            required
                        />
                    </div>

                    <!-- Email Field -->
                    <div class="space-y-2">
                        <label for="email" class="block text-sm font-medium text-foreground">
                            Email
                        </label>
                        <input 
                            type="email" 
                            id="email"
                            name="email"
                            placeholder="Digite seu Email"
                            class="form-field w-full px-4 py-3 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground"
                            data-bind="formData.email"
                            data-mock="true"
                            required
                        />
                    </div>

                    <!-- Submit Button -->
                    <!-- @STATE: isFormValid:boolean = false -->
                    <button 
                        type="button"
                        id="submitRegistration"
                        class="w-full mt-8 px-6 py-4 rounded-md font-medium transition-all duration-200 bg-muted text-muted-foreground cursor-not-allowed"
                        data-event="click:handleRegistrationSubmit"
                        data-implementation="Enable when all fields are filled, submit to webhook"
                        disabled
                    >
                        Enviar
                    </button>
                </form>
            </div>
            <!-- @END_COMPONENT: RegistrationForm -->
        </div>
        <!-- @END_COMPONENT: RegistrationPage -->

        <!-- @COMPONENT: FileUploadPage [page 2 - file upload] -->
        <div id="fileUploadPage" class="space-y-8 hidden">
            <!-- @COMPONENT: PageTitle [upload page title] -->
            <div class="text-center space-y-4">
                <h1 class="text-3xl font-bold text-foreground">Carregar Arquivo</h1>
                <p class="text-lg text-muted-foreground">
                    Escolha um arquivo para enviar
                </p>
            </div>
            <!-- @END_COMPONENT: PageTitle -->

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- @COMPONENT: StatusPanel [upload status indicators] -->
                <div class="space-y-4">
                    <h2 class="text-lg font-semibold text-foreground">Status</h2>
                    
                    <!-- @STATE: uploadStatus:string = 'waiting' -->
                    <div class="space-y-3">
                        <div class="status-indicator" data-status="waiting">
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                            <span class="text-foreground">Processo iniciado</span>
                        </div>
                        
                        <div class="status-indicator" data-status="uploading">
                            <div class="w-3 h-3 rounded-full bg-orange-500"></div>
                            <span class="text-muted-foreground">Arquivo subido</span>
                        </div>
                        
                        <div class="status-indicator" data-status="error">
                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                            <span class="text-muted-foreground">Problema de Upload</span>
                        </div>
                        
                        <div class="status-indicator" data-status="completed">
                            <div class="w-3 h-3 rounded-full bg-blue-500"></div>
                            <span class="text-muted-foreground">Finalizado</span>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: StatusPanel -->

                <!-- @COMPONENT: FileUploadArea [drag and drop upload zone] -->
                <div class="bg-card rounded-lg shadow-sm border border-border p-8">
                    <div 
                        class="upload-area rounded-lg p-12 text-center space-y-4 cursor-pointer"
                        id="uploadArea"
                        data-event="drop:handleFileDrop,dragover:handleDragOver,click:openFileDialog"
                        data-implementation="File drop handling with drag/drop events"
                    >
                        <!-- File upload icon -->
                        <div class="mx-auto w-16 h-16 text-muted-foreground">
                            <i class="fas fa-file-plus text-4xl"></i>
                        </div>
                        
                        <div class="space-y-2">
                            <h3 class="text-lg font-medium text-foreground">Enviar</h3>
                            <p class="text-sm text-muted-foreground">
                                Clique aqui ou arraste um arquivo
                            </p>
                        </div>
                        
                        <!-- Hidden file input -->
                        <input 
                            type="file" 
                            id="fileInput" 
                            class="hidden" 
                            data-implementation="File input for upload handling"
                            accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                        />
                    </div>
                    
                    <!-- File info display -->
                    <!-- @STATE: selectedFile:File = null -->
                    <div id="fileInfo" class="mt-4 hidden">
                        <div class="bg-muted rounded-md p-4 space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="font-medium text-foreground" id="fileName" data-bind="selectedFile.name">documento.pdf</span>
                                <button 
                                    class="text-muted-foreground hover:text-foreground"
                                    data-event="click:removeFile"
                                    data-implementation="Remove selected file"
                                >
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="text-sm text-muted-foreground" id="fileSize" data-bind="selectedFile.size">2.5 MB</div>
                        </div>
                    </div>
                    
                    <!-- Upload button -->
                    <button 
                        type="button"
                        id="uploadButton"
                        class="w-full mt-6 px-6 py-3 rounded-md font-medium transition-all duration-200 bg-muted text-muted-foreground cursor-not-allowed hidden"
                        data-event="click:handleFileUpload"
                        data-implementation="Upload file to webhook endpoint"
                        disabled
                    >
                        <i class="fas fa-upload mr-2"></i>
                        Fazer Upload
                    </button>
                </div>
                <!-- @END_COMPONENT: FileUploadArea -->
            </div>
            
            <!-- Back button -->
            <div class="text-center">
                <button 
                    type="button"
                    id="backButton"
                    class="px-6 py-2 text-primary hover:text-primary/80 font-medium transition-colors duration-200"
                    data-event="click:goBackToRegistration"
                    data-implementation="Navigate back to registration page"
                >
                    <i class="fas fa-arrow-left mr-2"></i>
                    Voltar ao Cadastro
                </button>
            </div>
        </div>
        <!-- @END_COMPONENT: FileUploadPage -->

    </main>
    <!-- @END_COMPONENT: PageContainer -->

    <script>
        (function() {
            // DOM elements
            const registrationPage = document.getElementById('registrationPage');
            const fileUploadPage = document.getElementById('fileUploadPage');
            const registrationForm = document.getElementById('registrationForm');
            const submitButton = document.getElementById('submitRegistration');
            const backButton = document.getElementById('backButton');
            
            // File upload elements
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const fileInfo = document.getElementById('fileInfo');
            const fileName = document.getElementById('fileName');
            const fileSize = document.getElementById('fileSize');
            const uploadButton = document.getElementById('uploadButton');
            
            // Form validation
            const formFields = registrationForm.querySelectorAll('input[required]');
            let selectedFile = null;
            
            // @FUNCTIONALITY: Form validation - check if all required fields are filled
            function validateForm() {
                const isValid = Array.from(formFields).every(field => field.value.trim() !== '');
                
                if (isValid) {
                    submitButton.classList.remove('bg-muted', 'text-muted-foreground', 'cursor-not-allowed');
                    submitButton.classList.add('bg-destructive', 'text-destructive-foreground', 'hover:bg-destructive/90', 'cursor-pointer');
                    submitButton.disabled = false;
                } else {
                    submitButton.classList.add('bg-muted', 'text-muted-foreground', 'cursor-not-allowed');
                    submitButton.classList.remove('bg-destructive', 'text-destructive-foreground', 'hover:bg-destructive/90', 'cursor-pointer');
                    submitButton.disabled = true;
                }
            }
            
            // Add validation listeners
            formFields.forEach(field => {
                field.addEventListener('input', validateForm);
                field.addEventListener('blur', validateForm);
            });
            
            // @FUNCTIONALITY: Registration form submission
            submitButton.addEventListener('click', async function(e) {
                e.preventDefault();
                if (!submitButton.disabled) {
                    const formData = new FormData(registrationForm);
                    const data = Object.fromEntries(formData.entries());
                    
                    // TODO: Implement webhook submission to https://n8n.automabot.net.br/webhook-test/cadastro
                    try {
                        // Simulate API call
                        submitButton.textContent = 'Enviando...';
                        submitButton.disabled = true;
                        
                        await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate delay
                        
                        // Navigate to file upload page
                        showFileUploadPage();
                    } catch (error) {
                        console.error('Registration error:', error);
                        alert('Erro ao enviar dados. Tente novamente.');
                        submitButton.textContent = 'Enviar';
                        validateForm();
                    }
                }
            });
            
            // @FUNCTIONALITY: Page navigation
            function showFileUploadPage() {
                registrationPage.classList.add('hidden');
                fileUploadPage.classList.remove('hidden');
            }
            
            function showRegistrationPage() {
                fileUploadPage.classList.add('hidden');
                registrationPage.classList.remove('hidden');
            }
            
            backButton.addEventListener('click', showRegistrationPage);
            
            // @FUNCTIONALITY: File upload handling
            uploadArea.addEventListener('click', function() {
                fileInput.click();
            });
            
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', function(e) {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFileSelection(files[0]);
                }
            });
            
            fileInput.addEventListener('change', function(e) {
                if (e.target.files.length > 0) {
                    handleFileSelection(e.target.files[0]);
                }
            });
            
            function handleFileSelection(file) {
                selectedFile = file;
                
                // Show file info
                fileName.textContent = file.name;
                fileSize.textContent = formatFileSize(file.size);
                fileInfo.classList.remove('hidden');
                uploadButton.classList.remove('hidden');
                
                // Enable upload button
                uploadButton.classList.remove('bg-muted', 'text-muted-foreground', 'cursor-not-allowed');
                uploadButton.classList.add('bg-primary', 'text-primary-foreground', 'hover:bg-primary/90', 'cursor-pointer');
                uploadButton.disabled = false;
            }
            
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            // Remove file functionality
            document.querySelector('[data-event="click:removeFile"]').addEventListener('click', function() {
                selectedFile = null;
                fileInput.value = '';
                fileInfo.classList.add('hidden');
                uploadButton.classList.add('hidden');
                uploadButton.classList.add('bg-muted', 'text-muted-foreground', 'cursor-not-allowed');
                uploadButton.classList.remove('bg-primary', 'text-primary-foreground', 'hover:bg-primary/90', 'cursor-pointer');
                uploadButton.disabled = true;
            });
            
            // @FUNCTIONALITY: File upload to webhook
            uploadButton.addEventListener('click', async function() {
                if (!selectedFile || uploadButton.disabled) return;
                
                // Update status to uploading
                updateUploadStatus('uploading');
                
                const formData = new FormData();
                formData.append('file', selectedFile);
                
                try {
                    uploadButton.textContent = 'Enviando...';
                    uploadButton.disabled = true;
                    
                    // TODO: Implement actual file upload to webhook
                    // const response = await fetch('https://n8n.automabot.net.br/webhook-test/cadastro', {
                    //     method: 'POST',
                    //     body: formData
                    // });
                    
                    // Simulate upload process
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    updateUploadStatus('completed');
                    uploadButton.innerHTML = '<i class="fas fa-check mr-2"></i>Upload Concluído';
                    uploadButton.classList.add('bg-green-500', 'text-white');
                    
                } catch (error) {
                    console.error('Upload error:', error);
                    updateUploadStatus('error');
                    uploadButton.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Erro no Upload';
                    uploadButton.classList.add('bg-red-500', 'text-white');
                }
            });
            
            function updateUploadStatus(status) {
                const statusIndicators = document.querySelectorAll('.status-indicator');
                statusIndicators.forEach(indicator => {
                    const span = indicator.querySelector('span');
                    span.classList.add('text-muted-foreground');
                    span.classList.remove('text-foreground');
                });
                
                const currentIndicator = document.querySelector(`[data-status="${status}"] span`);
                if (currentIndicator) {
                    currentIndicator.classList.remove('text-muted-foreground');
                    currentIndicator.classList.add('text-foreground');
                }
            }
            
            // Initialize form validation
            validateForm();
        })();
    </script>
</body>
</html>